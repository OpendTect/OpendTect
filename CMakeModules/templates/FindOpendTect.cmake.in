#________________________________________________________________________
#
# Copyright:	(C) 1995-@YEAR@ dGB Beheer B.V.
# License:	https://dgbes.com/licensing
#________________________________________________________________________
#
# Sets up CMake variables for projects who link against OpendTect
#

#Set OpendTect version
set( OpendTect_VERSION_MAJOR @OpendTect_VERSION_MAJOR@ )
set( OpendTect_VERSION_MINOR @OpendTect_VERSION_MINOR@ )
set( OpendTect_VERSION_PATCH @OpendTect_VERSION_PATCH@ )
set( OpendTect_FULL_VERSION "@OpendTect_FULL_VERSION@" )

if ( NOT DEFINED CMAKE_BUILD_TYPE )
    set( CMAKE_BUILD_TYPE "@CMAKE_BUILD_TYPE@" )
endif()

set( QT_DIR @QT_DIR@ )
set( QT_VERSION_MAJOR @QT_VERSION_MAJOR@ )
set( USE_QtWebEngine @USE_QtWebEngine@ )
set( OD_NO_QSQL @OD_NO_QSQL@ )
set( OD_NO_OSG @OD_NO_OSG@ )
set( OSG_ROOT @OSG_ROOT@ )
set( OSG_DIR @OSG_ROOT@ )
if ( NOT OD_NO_OSG )
    unset( OD_NO_OSG )
endif()
set( OD_NO_PROJ @OD_NO_PROJ@ )
set( PROJ_DIR @PROJ_DIR@ )
if ( NOT OD_NO_PROJ )
    unset( OD_NO_PROJ )
endif()
set( HDF5_ROOT @HDF5_ROOT@ )
set( OPENSSL_ROOT_DIR @OPENSSL_ROOT_DIR@ )
if ( NOT "@ZLIB_ROOT@" STREQUAL "" )
    set( ZLIB_ROOT @ZLIB_ROOT@ )
    find_package( ZLIB QUIET GLOBAL )
endif()
if ( NOT "@PNG_ROOT@" STREQUAL "" )
    set( PNG_ROOT @PNG_ROOT@ )
    find_package( PNG QUIET GLOBAL )
endif()
if ( NOT "@Freetype_ROOT@" STREQUAL "" )
    set( FREETYPE_DIR "@Freetype_ROOT@" )
elseif ( NOT "@FREETYPE_DIR@" STREQUAL "" )
    set( FREETYPE_DIR "@FREETYPE_DIR@" )
endif()
if ( IS_DIRECTORY "${FREETYPE_DIR}" )
    set( ENV{FREETYPE_DIR} "${FREETYPE_DIR}" )
    find_package( Freetype QUIET GLOBAL )
endif()
if ( NOT "@Fontconfig_ROOT@" STREQUAL "" )
    set( FONTCONFIG_DIR "@Fontconfig_ROOT@" )
elseif ( NOT "@FONTCONFIG_DIR@" STREQUAL "" )
    set( FONTCONFIG_DIR "@FONTCONFIG_DIR@" )
endif()
if ( IS_DIRECTORY "${FONTCONFIG_DIR}" )
    set( ENV{FONTCONFIG_DIR} "${FONTCONFIG_DIR}" )
    set( FONTCONFIG_ROOT "$ENV{FONTCONFIG_DIR}" )
    find_package( Fontconfig QUIET GLOBAL )
    unset( FONTCONFIG_ROOT )
endif()
if ( NOT "@Cups_ROOT@" STREQUAL "" )
    set( Cups_ROOT @Cups_ROOT@ )
endif()

#Setup OpendTect's binary location (if not done)
if ( NOT DEFINED OD_BINARY_BASEDIR )
    if ( APPLE )
	set ( OD_BINARY_BASEDIR ${OpendTect_DIR}/../.. )
    else()
	set ( OD_BINARY_BASEDIR ${OpendTect_DIR} )
    endif()
endif()
if ( NOT ONLY_SET_VAR )
    #Include all OpendTect Utility macros
    include( ${OpendTect_DIR}/CMakeModules/OD_SetupOD.cmake )

    #Set the linker path to OpendTect's libraries
    link_directories( ${OD_BINARY_BASEDIR}/${OD_LIB_OUTPUT_RELPATH} )
endif()

#As backup, link to release
set ( RELEASE_RELPATH "bin/${OD_PLFSUBDIR}/Release" )
if ( NOT ( OD_LIB_OUTPUT_RELPATH STREQUAL RELEASE_RELPATH ) )
    if ( EXISTS ${OD_BINARY_BASEDIR}/${RELEASE_RELPATH} )
	link_directories( ${OD_BINARY_BASEDIR}/${RELEASE_RELPATH} )
    endif()
endif()
unset( RELEASE_RELPATH )

#List of all modules
set( OD_CORE_MODULE_NAMES_od @OD_CORE_MODULE_NAMES_od@ )
#List of all OD plugins
set( OD_PLUGINS_NAMES_od @PLUGINS@ )

#Includes of all modules
@MODULE_INCLUDES@

#Dependencies of all modules
@MODULE_DEPS@

#External dependencies of some modules
@MODULE_EXTERNAL_LIBS@

#External runtime libraries of some modules
@MODULE_EXTERNAL_RUNTIME_LIBS@

#Externals setup for all modules
@MODULES_SETUP@

set( OD_THIRD_PARTY_FILES @OD_THIRD_PARTY_FILES@ )
set( OD_QTPLUGINS @OD_QTPLUGINS@ )
set( OD_QT_TRANSLATION_FILES @OD_QT_TRANSLATION_FILES@ )
